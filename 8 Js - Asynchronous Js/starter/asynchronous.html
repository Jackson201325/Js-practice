<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Asynchronous JavaScript</title>
</head>

<body>
    <h1>Asynchronous JavaScript</h1>
    <script>
        /*
        function getRecipe() {
            setTimeout(() => {
                const recipes = 
                console.log(recipes)

                setTimeout( id => {
                    const recipe = {
                        title: 'Fresh tomato pasta',
                        publisher: 'Johnas'
                    }
                    console.log(`${id}: ${recipe.title}`)

                    setTimeout(publisher => {
                        const recipe2 = {
                            title: 'Italian Pizza',
                            publisher: 'Jonas'
                        }
                        console.log(recipe2)
                    }, 1500, recipe.title)

                }, 1500, recipes[2])

            }, 1500)
        }
        getRecipe()
        */
        /*
        const getIDs = new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve([123, 324, 346, 455])
            }, 2000)
        })

        const getRecipe = recID => {
            return new Promise((resolve, reject) => {
                setTimeout(ID => {
                    const recipe = {
                        title: 'Fresh tomato pasta',
                        publisher: 'Jonas'
                    }
                    resolve(`${ID}: ${recipe.title}`)
                }, 1500, recID);
            })
        }

        const getPublisher = (publisher) => {
            return new Promise((resolve, reject) => {
                setTimeout((pub) => {
                    const recipe2 = {
                        title: 'Italian Pizza',
                        publisher: 'Jonas'
                    }
                    resolve(`${pub}: ${recipe2.title}`)

                }, 1500, publisher)
            })
        }

        async function getRecipeAW() {
            const IDs = await getIDs
            console.log(IDs)
            const recipe = await getRecipe(IDs[2])
            console.log(recipe)
            const publisher = await getPublisher('Jackson Huang')

            console.log(publisher)https://crossorigin.me/
            return recipe
        }

        getRecipeAW().then(le => console.log(le) )
    */
    async function getWeatherAW(woeid) {
        try {
            const result = await fetch(`https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/44418/`)
            const data = await result.json()
            const today = data.consolidated_weather[0]

            console.log(`The weather today is ${today.weather_state_name}, and the humidity is ${today.humidity}`)
       
        } catch(error) {
            alert(error)
        }
   }
   getWeatherAW('213')
   </script>
</body>

</html>

